name: Validate PR title

on:
  pull_request:
    types: [opened, edited, synchronize]

jobs:
  check-title:
    runs-on: ubuntu-latest
    steps:
      - name: Check PR title
        env:
          PR_TITLE: ${{ github.event.pull_request.title }}
        run: |
          echo "PR title: '$PR_TITLE'"
          if ! [[ "$PR_TITLE" =~ ^OP-[0-9]+_[A-Za-z0-9_]+$ ]]; then
            echo "❌ Invalid PR title. Use: OP-123_Title_Related_To_Ticket"
            exit 1
          fi
          echo "✅ PR title matches convention."
